---
layout: post
title:   HTTP
categories: 网络
description: HTTP基础
keywords: 
---

## HTTP基础

### 一、基础概念

1.URL

URI（统一资源标识符）包括URL（统一资源定位符）和URN（统一资源名称）

2.请求报文

请求行：请求方法、请求URL、HTTP协议以及版本

请求头

请求体

3.响应报文

响应行：HTTP版本号、HTTP状态码

响应头

响应体

### 二、HTTP方法

1.GET：当前网络请求中，绝大部分使用的是 GET 方法。 

2.HEAD:不返回报文主体，用于判断URL的有效性以及资源更新的日期时间等。

3.POST：主要是用来传输数据，而get主要用来获取资源。

4.TRACE:服务器将通信路径返回给客户端。

5.GET和POST的区别：

GET 用于获取资源，而 POST 用于传输实体主体。

 GET 的参数是以查询字符串出现在 URL 中，而 POST 的参数存储在实体主体中。

安全的 HTTP 方法不会改变服务器状态，也就是说它只是可读的。

GET 方法是安全的，而 POST 却不是，因为 POST 的目的是传送实体主体内容，这个内容可能是用户上传的表单数据，上传成功之后，服务器可能把这个数据存储到数据库中，因此状态也就发生了改变。

幂等的 HTTP 方法，同样的请求被执行一次与连续执行多次的效果是一样的，服务器的状态也是一样的。POST不是幂等的，GET是幂等的

GET可缓存，POST 大多数情况下是不可缓存的



### 三、HTTP状态码

1.100 Continue ：表明到目前为止都很正常，客户端可以继续发送请求或者忽略这个响应。

2.200 OK

​    204 No Content ：请求已经成功处理，但是返回的响应报文不包含实体的主体部分。一般在只需要从客户端往服务器发送信息，而不需要返回数据时使用。

​    206 Partial Content ：表示客户端进行了范围请求，响应报文包含由 Content-Range 指定范围的实体内容。

3.301 Moved Permanently ：永久性重定向

​    302 Found ：临时性重定向

​    303 See Other ：和 302 有着相同的功能，但是 303 明确要求客户端应该采用 GET 方法获取资源。

4.400 Bad Request ：请求报文中存在语法错误。

​    403 Forbidden ：请求被拒绝。

​    404 Not Found

5.500 Internal Server Error ：服务器正在执行请求时发生错误。

​    503 Service Unavailable ：服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。

### 四、具体应用

1.Cookie 

​    HTTP 协议是无状态的，主要是为了让 HTTP 协议尽可能简单，使得它能够处理大量事务。HTTP/1.1 引入 Cookie 来保存状态信息。

Cookie 是服务器发送到用户浏览器并保存在本地的一小块数据，可以用来：

会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）
个性化设置（如用户自定义设置、主题等）
浏览器行为跟踪（如跟踪分析用户行为等）

2.Session

​    除了可以将用户信息通过 Cookie 存储在用户浏览器中，也可以利用 Session 存储在服务器端，存储在服务器端的信息更加安全。

3.Cookie 与 Session 差别

Cookie 只能存储 ASCII 码字符串，而 Session 则可以存取任何类型的数据，因此在考虑数据复杂性时首选 Session；
Cookie 存储在浏览器中，容易被恶意查看。如果非要将一些隐私数据存在 Cookie 中，可以将 Cookie 值进行加密，然后在服务器进行解密；
对于大型网站，如果用户所有的信息都存储在 Session 中，那么开销是非常大的，因此不建议将所有的用户信息都存储到 Session 中。

4.缓存

缓解服务器压力；
降低客户端获取资源的延迟：缓存通常位于内存中，读取缓存的速度更快。并且缓存在地理位置上也有可能比源服务器来得近，例如浏览器缓存。

实现方法：

让代理服务器进行缓存；
让客户端浏览器进行缓存。

5.代理

代理服务器接受客户端的请求，并且转发给其它服务器。 

使用代理的主要目的是：

缓存
负载均衡
网络访问控制
访问日志记录

6.网关：与代理服务器不同的是，网关服务器会将 HTTP 转化为其它协议进行通信，从而请求其它非 HTTP 服务器的服务。

7.隧道：使用 SSL 等加密手段，在客户端和服务器之间建立一条安全的通信线路。

### 五、HTTPS

1.HTTPs 并不是新协议，而是让 HTTP 先和 SSL（Secure Sockets Layer）通信，再由 SSL 和 TCP 通信，也就是说 HTTPs 使用了隧道进行通信。 通过使用 SSL，HTTPs 具有了加密（防窃听）、认证（防伪装）和完整性保护（防篡改）。

2.对称密钥加密（Symmetric-Key Encryption），加密和解密使用同一密钥。 

优点：运算速度快；
缺点：无法安全地将密钥传输给通信方。

3.非对称密钥加密

非对称密钥加密，又称公开密钥加密（Public-Key Encryption），加密和解密使用不同的密钥。

非对称密钥除了用来加密，还可以用来进行签名。因为私有密钥无法被其他人获取，因此通信发送方使用其私有密钥进行签名，通信接收方使用发送方的公开密钥对签名进行解密，就能判断这个签名是否正确。

优点：可以更安全地将公开密钥传输给通信发送方；
缺点：运算速度慢。

4.HTTPs 采用的加密方式

HTTPs 采用混合的加密机制，使用非对称密钥加密用于传输对称密钥来保证传输过程的安全性，之后使用对称密钥加密进行通信来保证通信过程的效率。（下图中的 Session Key 就是对称密钥）

5.HTTPs 的缺点

因为需要进行加密解密等过程，因此速度会更慢；
需要支付证书授权的高额费用。

六、HTTP2.0

1.二进制分帧层

2.服务端推送：HTTP/2.0 在客户端请求一个资源时，会把相关的资源一起发送给客户端，客户端就不需要再次发起请求了

3.首部压缩：HTTP/1.1 的首部带有大量信息，而且每次都要重复发送。

HTTP/2.0 要求客户端和服务器同时维护和更新一个包含之前见过的首部字段表，从而避免了重复传输。

